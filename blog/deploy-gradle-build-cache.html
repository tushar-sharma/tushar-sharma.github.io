<!DOCTYPE html>
<html>
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="alternate" type="application/rss+xml" title="Randomwits RSS" href="/feed.xml">
    <meta charset="UTF-8">
    <!--[if IE]<meta http-equiv="X-UA-Compatible" content="chrome=1"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="author" content="Tushar Sharma">
<meta name="description" content="Random Wits, my digital footprint.">
<meta name="keywords" content="Tushar, Sharma, Web, Development, Personal Website, Random Wits, Randomwits">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta property="og:site_name" content="Tushar Sharma">
<title>Optimizing Builds with Gradle Build Cache</title>
<link rel="icon" type="image/svg+xml" href="/img/favicon.svg">
<link rel="icon" type="image/png" href="/img/favicon.png">
<link rel="stylesheet" href="/css/github.css">
<link rel="stylesheet" href="/css/font-awesome.css">
<link rel="stylesheet" href="/css/styles.css">
<script async src="/js/scale.fix.js"></script>

<!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Twitter cards -->
    <meta name="twitter:site" content="@tshrocks">
    <meta name="twitter:creator" content="@Tushar Sharma">
    <meta name="twitter:title" content="Optimizing Builds with Gradle Build Cache">
    <meta name="twitter:description" content="Welcome to Randomwits, my digital nest.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://unsplash.com/photos/5UNYknY0MTA/download?w=437">
    <meta property="og:image" content="https://unsplash.com/photos/5UNYknY0MTA/download?w=437">
    <!-- end of Twitter cards -->
    <!-- this is to allow mutiple tabs for code selection-->
    <script src="/js/clipboard.js"></script>
    <script src="/js/clipboard.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3875134254611206" crossorigin="anonymous"></script>
    <!-- Begin Jekyll SEO tag v2.8.0 -->
    <title>Optimizing Builds with Gradle Build Cache | RandomWits</title>
    <meta name="generator" content="Jekyll v4.3.3">
    <meta property="og:title" content="Optimizing Builds with Gradle Build Cache">
    <meta name="author" content="Tushar Sharma">
    <meta property="og:locale" content="en_US">
    <meta name="description" content="Gradle build cache is an essential tool for optimizing build times in software development. By storing build outputs either locally or remotely, it significantly reduces the time and resources required for rebuilding similar tasks. This cache mechanism is especially beneficial in continuous integration environments where builds occur frequently.">
    <meta property="og:description" content="Gradle build cache is an essential tool for optimizing build times in software development. By storing build outputs either locally or remotely, it significantly reduces the time and resources required for rebuilding similar tasks. This cache mechanism is especially beneficial in continuous integration environments where builds occur frequently.">
    <link rel="canonical" href="https://randomwits.com/blog/deploy-gradle-build-cache">
    <meta property="og:url" content="https://randomwits.com/blog/deploy-gradle-build-cache">
    <meta property="og:site_name" content="RandomWits">
    <meta property="og:image" content="https://unsplash.com/photos/5UNYknY0MTA/download?w=437">
    <meta property="og:type" content="article">
    <meta property="article:published_time" content="2024-01-14T00:00:00+00:00">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:image" content="https://unsplash.com/photos/5UNYknY0MTA/download?w=437">
    <meta property="twitter:title" content="Optimizing Builds with Gradle Build Cache">
    <script type="application/ld+json">
      {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Tushar Sharma"},"dateModified":"2024-01-14T00:00:00+00:00","datePublished":"2024-01-14T00:00:00+00:00","description":"Gradle build cache is an essential tool for optimizing build times in software development. By storing build outputs either locally or remotely, it significantly reduces the time and resources required for rebuilding similar tasks. This cache mechanism is especially beneficial in continuous integration environments where builds occur frequently.","headline":"Optimizing Builds with Gradle Build Cache","image":"https://unsplash.com/photos/5UNYknY0MTA/download?w=437","mainEntityOfPage":{"@type":"WebPage","@id":"https://randomwits.com/blog/deploy-gradle-build-cache"},"url":"https://randomwits.com/blog/deploy-gradle-build-cache"}
    </script>
    <!-- End Jekyll SEO tag -->
  </head>
  <body>
    <noscript>
      <h4 style="background: #ffacd; margin: 0; padding: 15px; text-align: center;">
        For a better experience on RandomWits, enable JavaScript in your browser.
      </h4>
    </noscript>
    <div class="wrapper">
      <header>
        <link rel="stylesheet" href="/css/styles.css">
        <link rel="stylesheet" href="/css/toc.css">
        <script defer src="/js/toc.js" type="text/javascript"></script>
        <script async src="https://kit.fontawesome.com/7aae5464ce.js" crossorigin="anonymous"></script>
        <script async src="/js/darkreader.js" crossorigin="anonymous"></script>
        <script async src="/js/dark_wrapper.js" crossorigin="anonymous"></script>
        <style type="text/css">
          @font-face {font-family: 'Somefont';
          	src:url('/font/OneDirection.ttf');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
          }

          @font-face {
            font-family: "King Basil";
            src: url("/font/King-Basil.ttf");
            font-display: swap;
          }

          .king-basil {
            font-family: "King Basil";
          }


          h1.heading { font-family: Myfont;
            color: rgb(51, 153, 204);}
          .top{color: rgb(68, 68, 68);}
          .sub{font-family:Somefont;}

          /* for the toc */
          header ul  {
            height: auto !important;
            border: none !important;
            width: auto !important;
            border-radius: 0px solid !important;
            border-right: 0px solid !important;
            font-size: 1rem !important;
            letter-spacing: 2px !important;
          }
          header ul a {
            padding-top: none !important;
            color: #39c !important;
            border-right: 0px solid !important;
            display: inline !important;
            padding: 0.5rem 1rem !important;
            border-bottom: 1px solid #39c !important;
          }

          /** toc */
          header li {
            height : auto !important;
            float: none !important;
            line-height: 140% !important;
            margin: 10px 0 !important;
            border-right: 0px solid !important;

          }
        </style>
        <div id="random" class="top king-basil" style="font-size: 32px; color: rgb(81, 170, 232); margin-bottom: 10px;">
          <a href="/">
            RandomWits
          </a>
          <a style="cursor:pointer;" class="DarkReader_Button">
            <i id="icon-dark" class="fa fa-cloud-moon"></i>
          </a>
        </div>
        <div style="clear:both;"></div>
        <div>
          <p class="me_blurb">
          </p>
          <div class="sub">
            <!-- <span id="textAnimation"></span>-->
            life is too short for a diary
          </div>
        </div>
        <!--<a href="/"><h1 class="heading">Random<span class="top">Wits</span></h1></a> -->
        <!--<p class="me_blurb"><div >beware of random wits...<br>sometimes they bite</div></p> -->
        <!--<span class="quora-follow-button" data-name="Tushar-Sharma-3">Follow <a href="http://www.quora.com/Tushar-Sharma-3">Tushar Sharma</a> on <a href="http://www.quora.com">Quora</a><script type="text/javascript" src="http://www.quora.com/widgets/follow?embed_code=Wo7vDKF"></script></span>
<br>
-->
        <!-- <h2>Projects</h2>
<div class="highlight" >
  <pre style="overflow: hidden; overflow-y: hidden;">
<code><span class="nv">$</span> latest projects</code>
     ├── <span class="nv"></span><a href="/projects/k-largest" title="Find kth largest element in an array">k-largest</a><br />     ├── <span class="nv"></span><a href="/projects/encrypt-files" title="Encrypted Files in Minix 3">encrypted-files</a><br />     └── <span class="nv"></span><a href="/projects/binary-semaphore" title="Binary Sempahore">binary-semaphore</a><br><div style="float:right;">+&nbsp;<a href="/projects">view all</a></div>
</pre>
</div>
-->
        <div class="highlight">
          <!-- Responsive Sidebar Navigation -->
          <style>
            .sidebar-hamburger {
              display: none;
              background: none;
              border: none;
              font-size: 2em;
              margin: 10px;
              cursor: pointer;
              z-index: 1001;
            }
            .nav-wrap {
              transition: right 0.3s;
            }
            @media (max-width: 800px) {
              .nav-wrap {
                position: fixed;
                top: 0;
                right: -260px;
                left: auto;
                width: 240px;
                height: 100vh;
                background: #fff;
                box-shadow: -2px 0 8px rgba(0,0,0,0.08);
                z-index: 1000;
                padding-top: 60px;
              }
              .nav-wrap.open {
                right: 0;
              }
              .sidebar-hamburger {
                display: block;
                position: fixed;
                right: 10px;
                left: auto;
                top: 10px;
                background: #fff;
                border-radius: 4px;
                box-shadow: 0 2px 8px rgba(0,0,0,0.08);
              }
              .main-nav ul {
                padding: 0;
                margin: 0;
              }
              .main-nav li {
                margin: 0;
                padding: 0;
                border-bottom: 1px solid #eee;
              }
              .main-nav a {
                display: block;
                padding: 18px 24px;
                font-size: 1.1em;
                color: #333;
                text-decoration: none;
              }
              .main-nav a:active, .main-nav a:focus {
                background: #f0f0f0;
              }
              body.sidebar-open {
                overflow: hidden;
              }
            }
          </style>
          <button class="sidebar-hamburger" aria-label="Open navigation" onclick="document.querySelector('.nav-wrap').classList.toggle('open'); document.body.classList.toggle('sidebar-open');">
            <span>☰</span>
          </button>
          <div style="clear:both;float:left;padding-bottom:15px;" class="navbar-nav">
            <div class="nav-wrap">
              <nav class="main-nav">
                <ul class="unstyled list-hover-slide">
                  <li><a href="/tags"><i class="fa fa-tag"></i> Tags</a></li>
                  <li><a href="/games"><i class="fas fa-gamepad"></i> Games</a></li>
                  <li><a href="/watchlist"><i class="fas fa-film"></i> Watchlist</a></li>
                  <li><a href="/bookshelf"><i class="fas fa-book-open"></i> Bookshelf</a></li>
                  <li><a href="/quotes"><i class="fas fa-comment-dots"></i> Quotes</a></li>
                  <li><a href="/travel"><i class="fas fa-map-marked-alt"></i> Travel</a></li>
                  <li><a href="/habits"><i class="fas fa-heartbeat"></i> Habits</a></li>
                  <li><a href="/resources"><i class="fas fa-laptop-code"></i> Resources</a></li>
                  <li><a href="/tools"><i class="fas fa-hammer"></i> Tools</a></li>
                  <li><a href="/contact"><i class="fas fa-file-signature"></i> Contact</a></li>
                  <li><a href="/about"><i class="fas fa-fingerprint"></i> About</a></li>
                </ul>
              </nav>
            </div>
          </div>
          <script>
            // Close sidebar when clicking outside (mobile)
            document.addEventListener('click', function(e) {
              var nav = document.querySelector('.nav-wrap');
              var btn = document.querySelector('.sidebar-hamburger');
              if (!nav || !btn) return;
              if (nav.classList.contains('open') && !nav.contains(e.target) && e.target !== btn && !btn.contains(e.target)) {
                nav.classList.remove('open');
                document.body.classList.remove('sidebar-open');
              }
            });
          </script>
        </div>
        <!-- only if page is root page -->
        <div id="toc-block" class="codeblock" style="display:none;">
          <h3 style="color:#39c;">
            <i class="far fa-bookmark"></i> On This Page</h3>
          <div id="toc"></div>
        </div>
        <br>
        <!-- toc page -->
        <br>
        <br>
        <script type="text/javascript">
          $(document).ready(function() {
              $('#toc').toc();
          });
        </script>
        <!-- Upvote next : disabled -->
        <!-- 
-->
        <!-- begin - this is to include Adds in the site -->
        <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3875134254611206"
     crossorigin="anonymous"></script> -->
        <!-- end - this is to include Adds in the site -->
      </header>
      <section>
        <link rel="stylesheet" href="/css/search.css">
        <link rel="stylesheet" href="/css/toc.css">
        <script src="/js/copyClipboard.js" type="text/javascript"></script>
        <!-- search box begins -->
        <div style="padding-bottom:60px; padding-top:20px; background : white;">
          <form style="float:right;" action="/search/?">
            <input type="search" name="q" placeholder="Search">
          </form>
        </div>
        <!-- search box ends -->
        <br>
        <small style="float:right; margin-top:5px;"><strong></strong></small>
        <h1>Optimizing Builds with Gradle Build Cache</h1>
        <p>Tags:  <a class="mytag" href="/tag/gradle" title="View posts tagged with: gradle">gradle</a>    <a class="mytag" href="/tag/java" title="View posts tagged with: java">java</a>    </p>
        <div class="author-info">
          <div class="author-image">
            <img src="/img/tushar_sharma.jpg" alt="Author">
          </div>
          <span class="author-name">Written by: 
            Tushar
            Sharma
          </span>
        </div>
        <div class="post-featured-image" style="text-align:center; margin-bottom:20px;">
          <img src="https://unsplash.com/photos/5UNYknY0MTA/download?w=800" alt="Featured image for Optimizing Builds with Gradle Build Cache" style="max-width:100%; height:auto;">
        </div>
        <p>Gradle build cache is an essential tool for optimizing build times in software development. By storing build outputs either locally or remotely, it significantly reduces the time and resources required for rebuilding similar tasks. This cache mechanism is especially beneficial in continuous integration environments where builds occur frequently.</p>
        <blockquote>
          <p>Note : Tested with gradle 8.5</p>
        </blockquote>
        <h2 id="setting-up-the-build-cache-node">Setting Up the Build Cache Node</h2>
        <h3 id="running-the-build-cache-node-locally">Running the Build Cache Node Locally</h3>
        <p>After downloading the  <a href="https://docs.gradle.com/build-cache-node/jar/build-cache-node-18.0.jar">jar</a> file, you can start the build cache node locally:</p>
        <div class="language-bash highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code>java <span class="nt">-jar</span> build-cache-node-18.0.jar start
WARNING: Using default data <span class="nb">dir </span>location <span class="s1">'/tmp/build-cache-node'</span> which is <span class="k">in </span>temp space and could be deleted at any <span class="nb">time</span> <span class="o">(</span>use <span class="s1">'--data-dir=&lt;dir&gt;'</span> to specify a persistent location<span class="o">)</span><span class="nb">.</span>
WARNING: This build cache is unusable as a build cache due to its access control settings - anonymous access is disabled and no <span class="nb">users </span>are defined.
Starting Develocity build cache node <span class="o">(</span>18.0<span class="o">)</span> ...
UI access is protected by generated username and password:
Build cache node started <span class="o">(</span>port: 5071<span class="o">)</span><span class="nb">.</span>
</code></pre>
          </div>
        </div>
        <p>This command will output several messages, including warnings and information about the default settings:</p>
        <ol>
          <li>
            <p><strong>Default Data Directory:</strong> It warns about using the default data directory located in temporary space (/tmp/build-cache-node). For persistent caching, it's recommended to specify a directory using –data-dir=<code class="language-plaintext highlighter-rouge">&lt;dir&gt;</code>.</p>
          </li>
          <li>
            <p><strong>Access Control Settings:</strong> By default, anonymous access to the build cache is disabled. To enable your application to access the cache, you need to configure access control settings.</p>
          </li>
        </ol>
        <h2 id="configuring-access-for-a-java-application">Configuring Access for a Java Application</h2>
        <h3 id="generating-a-hashed-salt-password">Generating a Hashed Salt Password</h3>
        <p>For enhanced security, the Gradle build cache requires a hashed salt password. You can generate this using the build-cache-node jar.</p>
        <div class="language-bash highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-jar</span> build-cache-node-18.0.jar <span class="nb">hash</span>
</code></pre>
          </div>
        </div>
        <h3 id="dockerfile">Dockerfile</h3>
        <p>Let's set up a Docker container to deploy the cache node easily in any environment. Below is the Dockerfile for creating such a container:</p>
        <div class="line-numbers code-block"> <script src="https://gist.github.com/tushar-sharma/a7a291a9e4a5d16c8a2f298ec508bd05.js?file=Dockerfile"></script> <button class="copy-button">Copy</button> </div>
        <p>Replace <code class="language-plaintext highlighter-rouge">&lt;hashed_password&gt;</code> with the hashed password generated earlier.</p>
        <blockquote>
          <p>Note: If you're using podman, ensure to specify the full path of the Dockerfile like</p>
        </blockquote>
        <div class="language-bash highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code>FROM docker.io/library/amazoncorretto:17-alpine-jdk
</code></pre>
          </div>
        </div>
        <p>Build and run your Docker container:</p>
        <div class="language-bash highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code><span class="c"># Build the Docker container</span>
<span class="nv">$ </span>docker build <span class="nt">-t</span> gradle-cache <span class="nb">.</span>

<span class="c"># Run the container</span>
<span class="nv">$ </span>docker run <span class="nt">-p</span> 5071:5071 gradle-cache  
</code></pre>
          </div>
        </div>
        <h2 id="verify-the-gradle-cache">Verify the Gradle Cache</h2>
        <h3 id="using-curl">Using Curl</h3>
        <div class="language-bash highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-sw</span> <span class="se">\\</span>n <span class="nt">--fail-with-body</span> <span class="nt">--show-error</span> http://localhost:5071/ping
SUCCESS
</code></pre>
          </div>
        </div>
        <h3 id="creating-a-simple-application">Creating a Simple Application</h3>
        <p>Go to <a href="https://start.spring.io/">start.initializr</a> and create a simple application. Ensure <code class="language-plaintext highlighter-rouge">gradle.properties</code> contains:</p>
        <div class="language-plaintext highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code>org.gradle.caching=true
</code></pre>
          </div>
        </div>
        <p>Update your <code class="language-plaintext highlighter-rouge">settings.gradle</code> to configure the remote build cache:</p>
        <div class="line-numbers code-block"> <script src="https://gist.github.com/tushar-sharma/a7a291a9e4a5d16c8a2f298ec508bd05.js?file=settings.gradle"></script> <button class="copy-button">Copy</button> </div>
        <h3 id="building-the-application">Building the Application</h3>
        <p>Finally, build your application:</p>
        <div class="language-bash highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code><span class="nv">$ </span>./gradlew clean build
</code></pre>
          </div>
        </div>
        <p>By setting up and utilizing the Gradle build cache, you significantly reduce build times and enhance the efficiency of your development workflow. It's a powerful feature that, when configured correctly, can provide substantial benefits in both local and CI/CD environments.</p>
        <!-- this is for pagination -->
        <nav class="pagination clear" style="padding-bottom:20px;">
          <a class="prev-item" href="/blog/weekly-logs-2024-01-08-14" title="Previous Post: Weekly Logs from Jan 8 to Jan 14, 2024">←Previous</a>     <a class="next-item" href="/blog/weekly-logs-2024-01-15-21" title="Next Post: Weekly Logs from Jan 15 to Jan 21, 2024">Next→</a>
        </nav>
        <hr>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'randomwits'; // required: replace example with your forum shortname
          var disqus_identifier = '/blog/deploy-gradle-build-cache';
          	    var disqus_url = 'http://tushar-sharma.github.io/blog/deploy-gradle-build-cache';

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </section>
    </div>
    <div style="clear:both;"></div>
    <div class="wrapper">
      <footer>
        <!-- <p><small>Tushar Sharma &copy; 2025</small></p> -->
        <link rel="stylesheet" href="/css/font-awesome.css">
        <script src="/js/scroll_top.js" type="text/javascript"></script>
        <script src="/js/scroll_top.js" type="text/javascript"></script>
        <div class="footer">
          <hr>
          <!--
  
    <div> <a href="/blog/"> blog </a> </div> <br>
  
    <div> <a href="/projects/"> projects </a> </div> <br>
  
    <div> <a href="/Blog/"> Blog </a> </div> <br>
  `
  -->
          <div style="margin: 0 auto; text-align: center; font-size:large;">
            <span><small>Made with <span style="color:#e00"><i class="icon-heart"></i></span> &amp; help from <a href="https://www.linkedin.com/in/sharmiwish" target="_blank">Vishi</a>  <br>
                Tushar Sharma © 2025
                <a title="Email" href="mailto:tushar@randomwits.com">
                  <i class="icon-envelope-alt icon-large"></i>  
                </a>
                <!--
  <a href="/contact/">
    <i class="icon-bell"></i> &nbsp;
  </a>
  <a title="PGP key"  href="http://pgp.mit.edu/pks/lookup?op=get&search=0xD339D367130569DC">
    <i class="icon-key"></i> &nbsp;
  </a>
  -->
                <a title="Github" href="https://github.com/tushar-sharma" target="_blank">
                  <i class="icon-github icon-large"></i>   
                </a>
                <a title="Linkedin" href="http://in.linkedin.com/in/tsharma3" target="_blank">
                  <i class="icon-linkedin icon-large"></i>  
                </a>
                <a title="Twitter" href="https://twitter.com/tshrocks" target="_blank">
                  <i class="icon-twitter icon-large"></i>  
                </a>
                <a title="Facebook" href="https://www.facebook.com/tushar.sharma1729" target="_blank">
                  <i class="icon-facebook icon-large"></i>  
                </a>
                <a title="RSS" href="/feed.xml">
                  <i class="icon-rss icon-large"></i>
                </a>
              </small></span><br>
            <br>
          </div>
          <div style="clear:both;">
            <hr>
          </div>
          <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-43895904-1', 'randomwits.com');
            ga('send', 'pageview');
          </script>
          <!-- back to top scroll -->
          <br>
          <br>
          <br>
          <br>
          <p id="back-top">
            <a href="#top">
              <span>
                <i class="fas fa-arrow-up"></i>
              </span>
            </a>
          </p>
        </div>
      </footer>
    </div>
  </body>
</html>
